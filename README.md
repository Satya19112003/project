Transport Management System (TMS) Backend AssignmentThis repository contains the complete backend solution for the Transport Management System (TMS), implemented using Spring Boot 3.2+ and PostgreSQL.The system implements all critical business rules, including multi-truck allocation, concurrent booking prevention (optimistic locking), and a best-bid scoring algorithm.1. Project Setup and Local DeploymentPrerequisitesJava 17+ (JDK)Maven 3.6+PostgreSQL 12+Docker and Docker Compose (Optional, but highly recommended for easy deployment)Local Setup StepsClone the Repository:git clone [Your GitHub URL]
cd tms-backend
Database Configuration:Ensure your local PostgreSQL server is running.Create the required database:CREATE DATABASE tms_db;
Verify the settings in src/main/resources/application.properties match your local PostgreSQL credentials (default settings are provided in the code).Build and Run:Build the project using Maven:mvn clean package
Run the application:java -jar target/tms-backend-1.0.0.jar
The application will start on http://localhost:8080.2. Database Schema DiagramThe database is normalized across five core tables. Foreign keys and indices are applied to ensure data integrity and query efficiency. The load table includes a version column for optimistic locking.(Note: Replace the text above with your actual schema diagram image in the repository)Key Schema Elements:EntityKey Field(s)Notesloadload_id (PK), versionIncludes version (optimistic lock). Indexed by shipper_id and status.transportertransporter_id (PK)Stores rating (used in best bid score).truck_assetid (PK)Tracks available truck capacity per type for a Transporter.bidbid_id (PK)FKs to load and transporter. Indexed by both.bookingbooking_id (PK)Links load and bid. Tracks allocated trucks.3. API Documentation (Swagger/OpenAPI)The API endpoints are documented using Springdoc OpenAPI, providing a full, interactive UI for testing and exploration.Access the API Documentation here:http://localhost:8080/swagger-ui/index.htmlCritical Business Rule Implementation DetailsAll required business logic is enforced primarily within the Service layer, maintaining the separation of concerns.RuleImplementation Location & MechanismRule 1: Capacity ValidationBidService: Checks trucksOffered <= availableTrucks before saving. BookingService: Deducts allocatedTrucks from Transporter.availableTrucks on booking confirmation, and restores on cancellation.Rule 2: Status TransitionsBidService: Auto-transitions POSTED -> OPEN_FOR_BIDS on the first bid. LoadService: Prevents cancellation of BOOKED loads.Rule 3: Multi-Truck AllocationBookingService: Calculates toAllocate = min(remainingNeeded, bid.trucksOffered). Load transitions to BOOKED only when allocatedTrucks == noOfTrucks.Rule 4: Concurrent BookingLoad.java: Uses the @Version annotation for optimistic locking. GlobalExceptionHandler: Catches ObjectOptimisticLockingFailureException and returns a 409 CONFLICT status code.Rule 5: Best Bid CalculationLoadService.getBestBids(): Implements the scoring formula: score = (1 / proposedRate) * 0.7 + (rating / 5) * 0.3.4. Test Coverage Screenshot[Placeholder for Test Coverage Screenshot image, typically generated by JaCoCo or equivalent tool after running tests.](Note: The actual test coverage screenshot should be replaced here after running the JUnit tests.)
